<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>tasks - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <div id="nav-logo-container">
        <a href="index.html">
            <img id="nav-logo" src="https://raw.github.com/actionhero/actionhero/master/public/logo/actionhero-small.png" />
        </a>
    </div>
    <h3>Classes</h3><ul><li><a href="ActionHero.html">ActionHero</a></li><li><a href="ActionHero.Action.html">Action</a></li><li><a href="ActionHero.ActionheroWebsocketClient.html">ActionheroWebsocketClient</a></li><li><a href="ActionHero.CLI.html">CLI</a></li><li><a href="ActionHero.Connection.html">Connection</a></li><li><a href="ActionHero.Initializer.html">Initializer</a></li><li><a href="ActionHero.Server.html">Server</a></li><li><a href="ActionHero.Task.html">Task</a></li><li><a href="api.specHelper.Connection.html">Connection</a></li></ul><h3>Namespaces</h3><ul><li><a href="api.html">api</a></li><li><a href="api.actions.html">actions</a></li><li><a href="api.cache.html">cache</a></li><li><a href="api.chatRoom.html">chatRoom</a></li><li><a href="api.config.html">config</a></li><li><a href="api.connections.html">connections</a></li><li><a href="api.documentation.html">documentation</a></li><li><a href="api.exceptions.html">exceptions</a></li><li><a href="api.i18n.html">i18n</a></li><li><a href="api.id.html">id</a></li><li><a href="api.params.html">params</a></li><li><a href="api.pids.html">pids</a></li><li><a href="api.redis.html">redis</a></li><li><a href="api.resque.html">resque</a></li><li><a href="api.routes.html">routes</a></li><li><a href="api.servers.html">servers</a></li><li><a href="api.specHelper.html">specHelper</a></li><li><a href="api.staticFile.html">staticFile</a></li><li><a href="api.tasks.html">tasks</a></li><li><a href="api.utils.html">utils</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-actionhero-cluster.html">actionhero-cluster</a></li><li><a href="tutorial-actions.html">actions</a></li><li><a href="tutorial-chat.html">chat</a></li><li><a href="tutorial-cli.html">cli</a></li><li><a href="tutorial-config.html">config</a></li><li><a href="tutorial-development-mode.html">development-mode</a></li><li><a href="tutorial-file-server.html">file-server</a></li><li><a href="tutorial-initializers.html">initializers</a></li><li><a href="tutorial-localization.html">localization</a></li><li><a href="tutorial-logging.html">logging</a></li><li><a href="tutorial-middleware.html">middleware</a></li><li><a href="tutorial-plugins.html">plugins</a></li><li><a href="tutorial-production-notes.html">production-notes</a></li><li><a href="tutorial-running-actionhero.html">running-actionhero</a></li><li><a href="tutorial-servers.html">servers</a></li><li><a href="tutorial-socket.html">socket</a></li><li><a href="tutorial-tasks.html">tasks</a></li><li><a href="tutorial-testing.html">testing</a></li><li><a href="tutorial-upgrade-path.html">upgrade-path</a></li><li><a href="tutorial-web.html">web</a></li><li><a href="tutorial-websocket.html">websocket</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">tasks</h1>
    

    




<section>

<header>
    
        <h2>
            <span class="ancestors"><a href="api.html">api</a>.</span>
        
        tasks
        </h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line62">line 62</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>



    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>tasks</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The tasks defined on this server.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>jobs</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The tasks defined on this server, converted into Node Resque jobs.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>middleware</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>Available Task Middleware.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>globalMiddleware</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>


            
            </td>

            

            

            <td class="description last"><p>Array of global middleware modules.</p></td>
        </tr>

    
    </tbody>
</table>





        
            <div class="description"><p>Tools for enquing and inspecting the task sytem (delayed jobs).</p></div>
        

        
    
    </div>

    
        <h3 class="subsection-title">Extends</h3>

        


    <ul>
        <li><a href="ActionHero.Initializer.html">ActionHero.Initializer</a></li>
    </ul>


    

    

    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id=".allDelayed"><span class="type-signature">(async, static) </span>allDelayed<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;Object>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line341">line 341</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Retrun all delayed jobs, orginized by the timetsamp at where they are to run at.
Note: This is a very slow command.
Will throw an error if redis cannot be reached.</p>
</div>























<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Object></span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".allWorkingOn"><span class="type-signature">(async, static) </span>allWorkingOn<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;Object>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line378">line 378</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Return all workers and what job they might be working on.
Will throw an error if redis cannot be reached.</p>
</div>























<h5>Returns:</h5>

        
<div class="param-desc">
    <p>An Object, with worker names as keys, containing the job they are working on.
                          If the worker is idle, 'started' will be returned.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Object></span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".cleanOldWorkers"><span class="type-signature">(async, static) </span>cleanOldWorkers<span class="signature">(age)</span><span class="type-signature"> &rarr; {Promise.&lt;ObjecT>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line443">line 443</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>If a worker process crashes, it will leave its state in redis as &quot;working&quot;.
You can remove workers from redis you know to be over, by specificing an age which would make them too old to exist.
This method will remove the data created by a 'stuck' worker and move the payload to the error queue.
However, it will not actually remove any processes which may be running.  A job <em>may</em> be running that you have removed.
Will throw an error if redis cannot be reached.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>age</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>The age of workers you know to be over, in seconds.</p></td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Details about workers which were removed.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;ObjecT></span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".del"><span class="type-signature">(static) </span>del<span class="signature">(q, taskName, args, count)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line213">line 213</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Delete a previously enqueued task, which hasn't been run yet, from a queue.
Will throw an error if redis cannot be reached.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>q</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Which queue/priority is the task stored on?</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>taskName</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The name of the job, likley to be the same name as a tak.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>args</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>
|

<span class="param-type">Array</span>


            
            </td>

            

            

            <td class="description last"><p>The arguments of the job.  Note, arguments passed to a Task initially may be modified when enqueuing.
                             It is best to read job properties first via <code>api.tasks.queued</code> or similar method.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>count</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Of the jobs that match q, taskName, and args, up to what position should we delete? (Default 0; this command is 0-indexed)</p></td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".delayedAt"><span class="type-signature">(async, static) </span>delayedAt<span class="signature">(timestamp)</span><span class="type-signature"> &rarr; {Promise.&lt;Array>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line329">line 329</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Return all jobs which have been enqueued to run at a certain timestamp.
Will throw an error if redis cannot be reached.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>timestamp</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>The timestamp to return jobs from.  Note: timestamp will be a unix timestamp, not javascript MS timestamp.</p></td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        
<div class="param-desc">
    <p>An array of jobs.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Array></span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".delDelayed"><span class="type-signature">(static) </span>delDelayed<span class="signature">(q, taskName, args)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line227">line 227</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Delete all previously enqueued tasks, which hasn't been run yet, from all possible delayed timestamps.
Will throw an error if redis cannot be reached.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>q</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Which queue/priority is to run on?</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>taskName</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The name of the job, likley to be the same name as a tak.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>args</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>
|

<span class="param-type">Array</span>


            
            </td>

            

            

            <td class="description last"><p>The arguments of the job.  Note, arguments passed to a Task initially may be modified when enqueuing.
                             It is best to read job properties first via <code>api.tasks.delayedAt</code> or similar method.</p></td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".delLock"><span class="type-signature">(async, static) </span>delLock<span class="signature">(lock)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line304">line 304</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="api.tasks.html#.locks">api.tasks.locks</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description">
    <p>Delete a lock on a job or worker.  Locks can be found via <code>api.tasks.locks</code>
Will throw an error if redis cannot be reached.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>lock</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The name of the lock.</p></td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".delQueue"><span class="type-signature">(async, static) </span>delQueue<span class="signature">(q)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line279">line 279</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Delete a queue in redis, and all jobs stored on it.
Will throw an error if redis cannot be reached.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>q</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The name of the queue.</p></td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".details"><span class="type-signature">(async, static) </span>details<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line525">line 525</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Reurn wholistic details about the whole task system, including failures, queues, and workers.
Will throw an error if redis cannot be reached.</p>
</div>























<h5>Returns:</h5>

        
<div class="param-desc">
    <p>[description]</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".enqueue"><span class="type-signature">(async, static) </span>enqueue<span class="signature">(taskName, params, queue)</span><span class="type-signature"> &rarr; {Promise.&lt;Boolean>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line164">line 164</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Enqueue a task to be performed in the background.
Will throw an error if redis cannot be reached.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>taskName</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The name of the task.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>Params to pass to the task.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>queue</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>(Optional) Which queue/priority to run this instance of the task on.</p></td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Did the task enqueue?</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Boolean></span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".enqueueAllRecurrentTasks"><span class="type-signature">(async, static) </span>enqueueAllRecurrentTasks<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line476">line 476</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="api.tasks.html#.enqueueRecurrentTask">api.tasks.enqueueRecurrentTask</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description">
    <p>This is run automatically at boot for all tasks which have a frequency, calling <code>api.tasks.enqueueRecurrentTask</code>
Will throw an error if redis cannot be reached.</p>
</div>























<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".enqueueAt"><span class="type-signature">(static) </span>enqueueAt<span class="signature">(timestamp, taskName, params, queue)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line180">line 180</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Enqueue a task to be performed in the background, at a certain time in the future.
Will throw an error if redis cannot be reached.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>timestamp</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>At what time the task is able to be run.  Does not gaurentee that the task will be run at this time. (in ms)</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>taskName</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The name of the task.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>Params to pass to the task.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>queue</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>(Optional) Which queue/priority to run this instance of the task on.</p></td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".enqueueIn"><span class="type-signature">(static) </span>enqueueIn<span class="signature">(time, taskName, params, queue)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line196">line 196</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Enqueue a task to be performed in the background, at a certain number of ms from now.
Will throw an error if redis cannot be reached.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>time</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>How long from now should we wait until it is OK to run this task? (in ms)</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>taskName</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The name of the task.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>Params to pass to the task.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>queue</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>(Optional) Which queue/priority to run this instance of the task on.</p></td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".enqueueRecurrentTask"><span class="type-signature">(async, static) </span>enqueueRecurrentTask<span class="signature">(taskName)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line457">line 457</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="api.tasks.html#.enqueueAllRecurrentTasks">api.tasks.enqueueAllRecurrentTasks</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description">
    <p>Ensures that a task which has a frequency is either running, or already enqueued.
This is run automatically at boot for all tasks which have a frequency, via <code>api.tasks.enqueueAllRecurrentTasks</code>.
Will throw an error if redis cannot be reached.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>taskName</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The name of the task.</p></td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".failed"><span class="type-signature">(async, static) </span>failed<span class="signature">(start, stop)</span><span class="type-signature"> &rarr; {Promise.&lt;Array>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line402">line 402</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Retrieve the details of failed jobs between start and stop (0-indexed).
Will throw an error if redis cannot be reached.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>start</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>The index of the first job to return.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>stop</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>The index of the last job to return.</p></td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        
<div class="param-desc">
    <p>An array of the failed jobs.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Array></span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".failedCount"><span class="type-signature">(async, static) </span>failedCount<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;Number>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line389">line 389</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>How many jobs are in the failed queue.
Will throw an error if redis cannot be reached.</p>
</div>























<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The number of failed jobs at this moment.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Number></span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".locks"><span class="type-signature">(async, static) </span>locks<span class="signature">()</span><span class="type-signature"> &rarr; {Promise|Object}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line291">line 291</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Return any locks, as created by resque plugins or task middleware, in this redis namespace.
Will contain locks with keys like <code>resque:lock:{job}</code> and <code>resque:workerslock:{workerId}</code>
Will throw an error if redis cannot be reached.</p>
</div>























<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Locks, orginzed by type.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>
|

<span class="param-type">Object</span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".queued"><span class="type-signature">(async, static) </span>queued<span class="signature">(q, start, stop)</span><span class="type-signature"> &rarr; {Promise.&lt;Array>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line267">line 267</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Retrieve the details of jobs enqueued on a certain queue between start and stop (0-indexed)
Will throw an error if redis cannot be reached.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>q</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The name of the queue.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>start</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>The index of the first job to return.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>stop</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>The index of the last job to return.</p></td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        
<div class="param-desc">
    <p>An array of the jobs enqueued.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Array></span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".removeFailed"><span class="type-signature">(async, static) </span>removeFailed<span class="signature">(failedJob)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line415">line 415</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="api.tasks.html#.failed">api.tasks.failed</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description">
    <p>Remove a specific job from the failed queue.
Will throw an error if redis cannot be reached.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>failedJob</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The failed job, as defined by <code>api.tasks.failed</code></p></td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".retryAndRemoveFailed"><span class="type-signature">(async, static) </span>retryAndRemoveFailed<span class="signature">(failedJob)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line428">line 428</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="api.tasks.html#.failed">api.tasks.failed</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description">
    <p>Remove a specific job from the failed queue, and retry it by placing it back into its original queue.
Will throw an error if redis cannot be reached.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>failedJob</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The failed job, as defined by <code>api.tasks.failed</code></p></td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".scheduledAt"><span class="type-signature">(async, static) </span>scheduledAt<span class="signature">(q, taskName, args)</span><span class="type-signature"> &rarr; {Promise.&lt;Arra>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line242">line 242</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Return the timestamps a task is scheduled for.
Will throw an error if redis cannot be reached.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>q</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Which queue/priority is to run on?</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>taskName</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The name of the job, likley to be the same name as a tak.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>args</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>
|

<span class="param-type">Array</span>


            
            </td>

            

            

            <td class="description last"><p>The arguments of the job.  Note, arguments passed to a Task initially may be modified when enqueuing.
                             It is best to read job properties first via <code>api.tasks.delayedAt</code> or similar method.</p></td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Returns an array of timestamps.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Arra></span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".stats"><span class="type-signature">(async, static) </span>stats<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;Object>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line253">line 253</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Return all resque stats for this namespace (how jobs failed, jobs succeded, etc)
Will throw an error if redis cannot be reached.</p>
</div>























<h5>Returns:</h5>

        
<div class="param-desc">
    <p>(varies on your redis instance)</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Object></span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".stopRecurrentTask"><span class="type-signature">(async, static) </span>stopRecurrentTask<span class="signature">(taskName)</span><span class="type-signature"> &rarr; {Promise.&lt;Number>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line505">line 505</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Stop a task with a frequency by removing it from all possible queues.
Will throw an error if redis cannot be reached.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>taskName</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The name of the task.</p></td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        
<div class="param-desc">
    <p>How many tasks were removed.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Number></span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".timestamps"><span class="type-signature">(async, static) </span>timestamps<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;Array>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line317">line 317</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="api.tasks.html#.enqueueIn">api.tasks.enqueueIn</a></li>
        
            <li><a href="api.tasks.html#.enqueueAt">api.tasks.enqueueAt</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description">
    <p>List all timestamps for which tasks are enqueued in the future, via <code>api.tasks.enqueueIn</code> or <code>api.tasks.enqueueAt</code>
Will throw an error if redis cannot be reached.</p>
</div>























<h5>Returns:</h5>

        
<div class="param-desc">
    <p>An array of timetamps. Note: These timestamps will be in unix timestamps, not javascript MS timestamps.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Array></span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".workers"><span class="type-signature">(async, static) </span>workers<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;Object>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line353">line 353</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Retrun all workers registered by all members of this cluster.
Note: MultiWorker processors each register as a unique worker.
Will throw an error if redis cannot be reached.</p>
</div>























<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Object></span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".workingOn"><span class="type-signature">(async, static) </span>workingOn<span class="signature">(workerName, queues)</span><span class="type-signature"> &rarr; {Promise.&lt;Object>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line366">line 366</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>What is a given worker working on?  If the worker is idle, 'started' will be returned.
Will throw an error if redis cannot be reached.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>workerName</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The worker base name, usually a function of the PID.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>queues</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The queues the worker is assigned to work.</p></td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Object></span>


    </dd>
</dl>

    


        
    

    

    
</article>

</section>




</div>

<br class="clear">

<footer>
    Learn more about ActionHero @ <a href="https://www.actionherojs.com">www.actionherojs.com</a>
    <br />
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> using the <a href="https://github.com/actionhero/docdash-actionhero-theme">docdash-actionhero-theme</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>