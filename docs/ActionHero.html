<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>ActionHero - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <div id="nav-logo-container">
        <a href="index.html">
            <img id="nav-logo" src="https://raw.github.com/actionhero/actionhero/master/public/logo/actionhero-small.png" />
        </a>
    </div>
    <h3>Tutorials</h3><ul><li><a href="tutorial-actions.html">actions</a></li><li><a href="tutorial-chat.html">chat</a></li><li><a href="tutorial-cli.html">cli</a></li><li><a href="tutorial-cluster.html">cluster</a></li><li><a href="tutorial-config.html">config</a></li><li><a href="tutorial-development-mode.html">development-mode</a></li><li><a href="tutorial-file-server.html">file-server</a></li><li><a href="tutorial-initializers.html">initializers</a></li><li><a href="tutorial-localization.html">localization</a></li><li><a href="tutorial-logging.html">logging</a></li><li><a href="tutorial-middleware.html">middleware</a></li><li><a href="tutorial-plugins.html">plugins</a></li><li><a href="tutorial-production-notes.html">production-notes</a></li><li><a href="tutorial-running-actionhero.html">running-actionhero</a></li><li><a href="tutorial-servers.html">servers</a></li><li><a href="tutorial-socket.html">socket</a></li><li><a href="tutorial-tasks.html">tasks</a></li><li><a href="tutorial-testing.html">testing</a></li><li><a href="tutorial-upgrade-path.html">upgrade-path</a></li><li><a href="tutorial-web.html">web</a></li><li><a href="tutorial-websocket.html">websocket</a></li></ul><h3>Classes</h3><ul><li><a href="ActionHero.html">ActionHero</a></li><li><a href="ActionHero.Action.html">Action</a></li><li><a href="ActionHero.ActionheroWebsocketClient.html">ActionheroWebsocketClient</a></li><li><a href="ActionHero.CLI.html">CLI</a></li><li><a href="ActionHero.Connection.html">Connection</a></li><li><a href="ActionHero.Initializer.html">Initializer</a></li><li><a href="ActionHero.Server.html">Server</a></li><li><a href="ActionHero.Task.html">Task</a></li><li><a href="api.specHelper.Connection.html">Connection</a></li></ul><h3>Namespaces</h3><ul><li><a href="api.html">api</a></li><li><a href="api.actions.html">actions</a></li><li><a href="api.cache.html">cache</a></li><li><a href="api.chatRoom.html">chatRoom</a></li><li><a href="api.config.html">config</a></li><li><a href="api.connections.html">connections</a></li><li><a href="api.documentation.html">documentation</a></li><li><a href="api.exceptions.html">exceptions</a></li><li><a href="api.i18n.html">i18n</a></li><li><a href="api.id.html">id</a></li><li><a href="api.params.html">params</a></li><li><a href="api.pids.html">pids</a></li><li><a href="api.redis.html">redis</a></li><li><a href="api.resque.html">resque</a></li><li><a href="api.routes.html">routes</a></li><li><a href="api.servers.html">servers</a></li><li><a href="api.specHelper.html">specHelper</a></li><li><a href="api.staticFile.html">staticFile</a></li><li><a href="api.tasks.html">tasks</a></li><li><a href="api.utils.html">utils</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">ActionHero</h1>
    

    




<section>

<header>
    
        <h2>
        ActionHero
        </h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    <h4 class="name" id="ActionHero"><span class="type-signature"></span>new ActionHero<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line33">line 33</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>The ActionHero module.</p>
</div>

























    
    </div>

    

    

    
        <h3 class="subsection-title">Classes</h3>

        <dl>
            <dt><a href="ActionHero.Action.html">Action</a></dt>
            <dd></dd>
        
            <dt><a href="ActionHero.ActionheroWebsocketClient.html">ActionheroWebsocketClient</a></dt>
            <dd></dd>
        
            <dt><a href="ActionHero.CLI.html">CLI</a></dt>
            <dd></dd>
        
            <dt><a href="ActionHero.Connection.html">Connection</a></dt>
            <dd></dd>
        
            <dt><a href="ActionHero.Initializer.html">Initializer</a></dt>
            <dd></dd>
        
            <dt><a href="ActionHero.Server.html">Server</a></dt>
            <dd></dd>
        
            <dt><a href="ActionHero.Task.html">Task</a></dt>
            <dd></dd>
        </dl>
    

     

    

    

    

    
        <h3 class="subsection-title">Type Definitions</h3>

        
                

    

    <h4 class="name" id="~ActionCallback"><span class="type-signature"></span>ActionCallback<span class="signature">(data)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_actions.js.html">initializers/actions.js</a>, <a href="initializers_actions.js.html#line6">line 6</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="ActionHero.html#~ActionMiddleware">ActionHero~ActionMiddleware</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description">
    <p>This callback is displayed as part of the Requester class.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The data object.</p></td>
        </tr>

    
    </tbody>
</table>
















            
                
<h4 class="name" id="~ActionMiddleware">ActionMiddleware</h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_actions.js.html">initializers/actions.js</a>, <a href="initializers_actions.js.html#line13">line 13</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="api.actions.html#.addMiddleware">api.actions.addMiddleware</a></li>
        </ul>
    </dd>
    

    
</dl>



    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Unique name for the middleware.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            

            <td class="description last"><p>Is this middleware applied to all actions?</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>priority</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Module load order. Defaults to <code>api.config.general.defaultMiddlewarePriority</code>.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>preProcessor</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="ActionHero.html#~ActionCallback">ActionHero~ActionCallback</a></span>


            
            </td>

            

            

            <td class="description last"><p>Called berore the action runs.  Has access to all params, before sanitizartion.  Can modify the data object for use in actions.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>postProcessor</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="ActionHero.html#~ActionCallback">ActionHero~ActionCallback</a></span>


            
            </td>

            

            

            <td class="description last"><p>Called after the action runs.</p></td>
        </tr>

    
    </tbody>
</table>






<div class="description">
    <p>Middleware definition for Actions</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Object</span>


        </li>
    </ul>





    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var middleware = {
  name: 'userId checker',
  global: false,
  priority: 1000,
  preProcessor: async (data) => {
    if(!data.params.userId){
      throw new Error('All actions require a userId')
    }
  },
  postProcessor: async (data) => {
    if(data.thing.stuff == false){ data.toRender = false }
  }
}

api.actions.addMiddleware(middleware);</code></pre>



            
                
<h4 class="name" id="~ChatMiddleware">ChatMiddleware</h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_chatRoom.js.html">initializers/chatRoom.js</a>, <a href="initializers_chatRoom.js.html#line23">line 23</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="api.chatRoom.html#.addMiddleware">api.chatRoom.addMiddleware</a></li>
        
            <li><a href="ActionHero.html#~ChatRoomCallback">ActionHero~ChatRoomCallback</a></li>
        
            <li><a href="ActionHero.html#~ChatSayCallback">ActionHero~ChatSayCallback</a></li>
        </ul>
    </dd>
    

    
</dl>



    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Unique name for the middleware.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>priority</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Module load order. Defaults to <code>api.config.general.defaultMiddlewarePriority</code>.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>join</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="ActionHero.html#~ChatRoomCallback">ActionHero~ChatRoomCallback</a></span>


            
            </td>

            

            

            <td class="description last"><p>Called when a connection joins a room.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>leave</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="ActionHero.html#~ChatRoomCallback">ActionHero~ChatRoomCallback</a></span>


            
            </td>

            

            

            <td class="description last"><p>Called when a connection leaves a room.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>onSayReceive</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="ActionHero.html#~ChatSayCallback">ActionHero~ChatSayCallback</a></span>


            
            </td>

            

            

            <td class="description last"><p>Called when a connection says a message to a room.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>say</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="ActionHero.html#~ChatSayCallback">ActionHero~ChatSayCallback</a></span>


            
            </td>

            

            

            <td class="description last"><p>Called when a connection is about to recieve a say message.</p></td>
        </tr>

    
    </tbody>
</table>






<div class="description">
    <p>Middleware definition for processing chat events.  Can be of the</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Object</span>


        </li>
    </ul>





    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var chatMiddleware = {
  name: 'chat middleware',
  priority: 1000,
  join: (connection, room) => {
    // announce all connections entering a room
    api.chatRoom.broadcast({}, room, 'I have joined the room: ' + connection.id, callback)
  },
  leave:(connection, room, callback) => {
    // announce all connections leaving a room
    api.chatRoom.broadcast({}, room, 'I have left the room: ' + connection.id, callback)
  },
  // Will be executed once per client connection before delivering the message.
  say: (connection, room, messagePayload) => {
    // do stuff
    api.log(messagePayload)
  },
  // Will be executed only once, when the message is sent to the server.
  onSayReceive: (connection, room, messagePayload) => {
    // do stuff
    api.log(messagePayload)
  }
}

api.chatRoom.addMiddleware(chatMiddleware)</code></pre>



            
                

    

    <h4 class="name" id="~ChatRoomCallback"><span class="type-signature"></span>ChatRoomCallback<span class="signature">(connection, room)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_chatRoom.js.html">initializers/chatRoom.js</a>, <a href="initializers_chatRoom.js.html#line15">line 15</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="ActionHero.html#~ChatMiddleware">ActionHero~ChatMiddleware</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description">
    <p>This callback is displayed as part of the Requester class.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>connection</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The connection being created/destroyed.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>room</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The room being chatted within.</p></td>
        </tr>

    
    </tbody>
</table>
















            
                

    

    <h4 class="name" id="~ChatSayCallback"><span class="type-signature"></span>ChatSayCallback<span class="signature">(connection, room, messagePayload)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_chatRoom.js.html">initializers/chatRoom.js</a>, <a href="initializers_chatRoom.js.html#line6">line 6</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="ActionHero.html#~ChatMiddleware">ActionHero~ChatMiddleware</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description">
    <p>This callback is displayed as part of the Requester class.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>connection</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The connection being created/destroyed.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>room</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The room being chatted within.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>messagePayload</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The message &amp; metadata.</p></td>
        </tr>

    
    </tbody>
</table>
















            
                

    

    <h4 class="name" id="~ConnectionCallback"><span class="type-signature"></span>ConnectionCallback<span class="signature">(connection)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_connections.js.html">initializers/connections.js</a>, <a href="initializers_connections.js.html#line6">line 6</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="ActionHero.html#~ConnectionMiddleware">ActionHero~ConnectionMiddleware</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description">
    <p>This callback is displayed as part of the Requester class.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>connection</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The connection being created/destroyed.</p></td>
        </tr>

    
    </tbody>
</table>
















            
                
<h4 class="name" id="~ConnectionMiddleware">ConnectionMiddleware</h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_connections.js.html">initializers/connections.js</a>, <a href="initializers_connections.js.html#line13">line 13</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="api.connections.html#.addMiddleware">api.connections.addMiddleware</a></li>
        </ul>
    </dd>
    

    
</dl>



    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Unique name for the middleware.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>priority</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Module load order. Defaults to <code>api.config.general.defaultMiddlewarePriority</code>.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>create</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="ActionHero.html#~ConnectionCallback">ActionHero~ConnectionCallback</a></span>


            
            </td>

            

            

            <td class="description last"><p>Called for each new connection when it is created.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>destroy</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="ActionHero.html#~ConnectionCallback">ActionHero~ConnectionCallback</a></span>


            
            </td>

            

            

            <td class="description last"><p>Called for each connection before it is destroyed.</p></td>
        </tr>

    
    </tbody>
</table>






<div class="description">
    <p>Middleware definition for processing connection events</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Object</span>


        </li>
    </ul>





    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var connectionMiddleware = {
  name: 'connection middleware',
  priority: 1000,
  create: (connection) => {
    // do stuff
  },
  destroy:(connection) => {
    // do stuff
  }
}

api.connections.addMiddleware(connectionMiddleware)</code></pre>



            
                

    

    <h4 class="name" id="~TaskCallback"><span class="type-signature"></span>TaskCallback<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line7">line 7</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="ActionHero.html#~TaskMiddleware">ActionHero~TaskMiddleware</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description">
    <p>This callback is displayed as part of the Requester class.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>this.worker</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The task worker, if this is a pre or post process step.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>this.args</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>If this is a queue step, the arguemnts to the task</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>this.queue</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The queue to be used / is being used.</p></td>
        </tr>

    
    </tbody>
</table>
















            
                
<h4 class="name" id="~TaskMiddleware">TaskMiddleware</h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="initializers_tasks.js.html">initializers/tasks.js</a>, <a href="initializers_tasks.js.html#line16">line 16</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="api.actions.html#.addMiddleware">api.actions.addMiddleware</a></li>
        </ul>
    </dd>
    

    
</dl>



    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Unique name for the middleware.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            

            <td class="description last"><p>Is this middleware applied to all tasks?</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>priority</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Module load order. Defaults to <code>api.config.general.defaultMiddlewarePriority</code>.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>preProcessor</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="ActionHero.html#~TaskCallback">ActionHero~TaskCallback</a></span>


            
            </td>

            

            

            <td class="description last"><p>Called berore the action runs.  Has access to all params, before sanitizartion.  Can modify the data object for use in actions.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>postProcessor</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="ActionHero.html#~TaskCallback">ActionHero~TaskCallback</a></span>


            
            </td>

            

            

            <td class="description last"><p>Called after the action runs.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>preEnqueue</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="ActionHero.html#~TaskCallback">ActionHero~TaskCallback</a></span>


            
            </td>

            

            

            <td class="description last"><p>Called before a task using this middleware is enqueud.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>postEnqueue</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="ActionHero.html#~TaskCallback">ActionHero~TaskCallback</a></span>


            
            </td>

            

            

            <td class="description last"><p>Called after a task using this middleware is enqueud.</p></td>
        </tr>

    
    </tbody>
</table>






<div class="description">
    <p>Middleware definition for Actions</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Object</span>


        </li>
    </ul>





    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const middleware = {
  name: 'timer',
  global: true,
  priority: 90,
  preProcessor: async () => {
    const worker = this.worker
    worker.startTime = process.hrtime()
  },
  postProcessor: async () => {
    const worker = this.worker
    const elapsed = process.hrtime(worker.startTime)
    const seconds = elapsed[0]
    const millis = elapsed[1] / 1000000
    api.log(worker.job.class + ' done in ' + seconds + ' s and ' + millis + ' ms.', 'info')
  },
  preEnqueue: async () => {
    const arg = this.args[0]
    return (arg === 'ok') // returing `false` will prevent the task from enqueing
  },
  postEnqueue: async () => {
    api.log("Task successfully enqueued!")
  }
}

api.tasks.addMiddleware(middleware)</code></pre>



            
    

    
</article>

</section>




</div>

<br class="clear">

<footer>
    Learn more about ActionHero @ <a href="https://www.actionherojs.com">www.actionherojs.com</a>
    <br />
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> using the <a href="https://github.com/actionhero/docdash-actionhero-theme">docdash-actionhero-theme</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>